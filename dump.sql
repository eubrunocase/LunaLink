--
-- PostgreSQL database dump
--

-- Dumped from database version 14.17 (Homebrew)
-- Dumped by pg_dump version 14.17 (Homebrew)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: administrator; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.administrator (
    id bigint NOT NULL
);


ALTER TABLE public.administrator OWNER TO brunocase;

--
-- Name: check_in_gym; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.check_in_gym (
    id uuid NOT NULL,
    entrada timestamp(6) without time zone,
    resident_id bigint NOT NULL,
    space_id bigint NOT NULL
);


ALTER TABLE public.check_in_gym OWNER TO brunocase;

--
-- Name: check_out_gym; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.check_out_gym (
    id uuid NOT NULL,
    saida timestamp(6) without time zone,
    check_in_gym_id uuid,
    resident_id_id bigint
);


ALTER TABLE public.check_out_gym OWNER TO brunocase;

--
-- Name: delivery; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.delivery (
    id uuid NOT NULL,
    image bytea,
    name_resident character varying(255),
    protocol_number character varying(255),
    email_resident character varying(255)
);


ALTER TABLE public.delivery OWNER TO brunocase;

--
-- Name: monthly_reservations; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.monthly_reservations (
    id bigint NOT NULL,
    resident_id bigint NOT NULL,
    reservation_id bigint NOT NULL,
    creation_date timestamp(6) without time zone
);


ALTER TABLE public.monthly_reservations OWNER TO brunocase;

--
-- Name: monthly_reservations_id_seq; Type: SEQUENCE; Schema: public; Owner: brunocase
--

ALTER TABLE public.monthly_reservations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.monthly_reservations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: reservation; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.reservation (
    id bigint NOT NULL,
    date date NOT NULL,
    resident_id bigint NOT NULL,
    space_id bigint NOT NULL
);


ALTER TABLE public.reservation OWNER TO brunocase;

--
-- Name: reservation_id_seq; Type: SEQUENCE; Schema: public; Owner: brunocase
--

ALTER TABLE public.reservation ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.reservation_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: resident; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.resident (
    id bigint NOT NULL
);


ALTER TABLE public.resident OWNER TO brunocase;

--
-- Name: space; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.space (
    id bigint NOT NULL,
    type character varying(255),
    CONSTRAINT space_type_check CHECK (((type)::text = ANY ((ARRAY['SALAO_FESTAS'::character varying, 'CHURRASQUEIRA'::character varying, 'ACADEMIA'::character varying])::text[])))
);


ALTER TABLE public.space OWNER TO brunocase;

--
-- Name: space_id_seq; Type: SEQUENCE; Schema: public; Owner: brunocase
--

ALTER TABLE public.space ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.space_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: brunocase
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    login character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    role character varying(255) NOT NULL,
    email character varying(255),
    name character varying(255),
    login_email character varying(255)
);


ALTER TABLE public.users OWNER TO brunocase;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: brunocase
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: administrator; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.administrator (id) FROM stdin;
5
10
\.


--
-- Data for Name: check_in_gym; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.check_in_gym (id, entrada, resident_id, space_id) FROM stdin;
2381f882-6743-45e8-95ed-340bfbcdf784	2025-09-27 10:30:15	1	3
e852adce-2696-4f3a-b53b-d401493760d3	2025-09-27 10:30:15	9	3
cc24ad5f-e1c9-4bb8-add9-4c155a2dd572	2025-09-28 10:30:15	9	3
3621b70b-7b17-45f6-9b94-42d6006df7dc	2025-09-28 11:47:15	9	3
dd5c6ae1-a94b-4c04-b4b1-e861bf6b204b	2025-10-28 11:47:15	1	3
\.


--
-- Data for Name: check_out_gym; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.check_out_gym (id, saida, check_in_gym_id, resident_id_id) FROM stdin;
\.


--
-- Data for Name: delivery; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.delivery (id, image, name_resident, protocol_number, email_resident) FROM stdin;
\.


--
-- Data for Name: monthly_reservations; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.monthly_reservations (id, resident_id, reservation_id, creation_date) FROM stdin;
1	1	8	\N
2	6	9	\N
5	7	12	2025-08-28 19:42:26
4	7	11	2025-08-28 19:40:18
3	7	10	2025-08-28 19:28:54
6	9	13	2025-09-04 22:23:27
10	1	20	2025-09-17 18:38:03
11	1	21	2025-10-05 19:00:37
12	1	22	2025-10-06 08:04:11
13	9	23	2026-01-22 22:28:00
14	9	24	2026-01-23 17:54:50
\.


--
-- Data for Name: reservation; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.reservation (id, date, resident_id, space_id) FROM stdin;
5	2024-05-02	1	2
6	2024-05-10	1	2
8	2024-08-10	1	1
9	2024-05-11	6	1
10	2025-08-28	7	1
11	2025-08-29	7	1
12	2025-08-30	7	1
13	2025-09-04	9	1
1	2025-09-13	1	1
20	2025-09-20	1	2
21	2026-10-01	1	1
22	2026-10-02	1	1
23	2026-12-21	9	2
24	2026-12-22	9	2
\.


--
-- Data for Name: resident; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.resident (id) FROM stdin;
1
6
7
9
11
\.


--
-- Data for Name: space; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.space (id, type) FROM stdin;
1	SALAO_FESTAS
2	CHURRASQUEIRA
3	ACADEMIA
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: brunocase
--

COPY public.users (id, login, password, role, email, name, login_email) FROM stdin;
1	Morador1	$2a$10$Rp.hwRqFUpVmdkfO1ce22uIzhN/ixlBr7n3pPd/N0CtLD7073WQRC	RESIDENT	\N	\N	\N
5	adm1	$2a$10$O9gk9tk3KRKpzYUnx/KPkutCchGmIC1bcQFirdW/aUuQj6gT9/QR2	ADMINISTRATOR	\N	\N	\N
6	teste	$2a$10$wfTvYmPuPw4l2F7zznWrAeZGsTCErDhxn/8dwuhwYLG6XmqK9ZjQu	RESIDENT	\N	\N	\N
7	teste2	$2a$10$3wh.wGHFD0yYUD0cm.bPQeUp8W7iVBUcGjUrHxyssmaLJRnGWQPuu	RESIDENT	\N	\N	\N
9	zaira	$2a$10$ruBefJsz95oE1bxrabu7mehejwMLLcYH29CaLUuFhAqEkr95fSIji	RESIDENT	\N	\N	\N
10	bruno	$2a$10$GM1ZUziZ.5uS3cW5pqx4nuASVdEje3fr3cEOD7875Z9P8r.8tGYei	ADMINISTRATOR	\N	\N	\N
11	porteiro	$2a$10$kCyrKBircbysiMWJ0A5u9OZF5ycsBh0JYuTgQBFg6oiEGMSZTn4H2	EMPLOYEE	\N	\N	\N
\.


--
-- Name: monthly_reservations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: brunocase
--

SELECT pg_catalog.setval('public.monthly_reservations_id_seq', 14, true);


--
-- Name: reservation_id_seq; Type: SEQUENCE SET; Schema: public; Owner: brunocase
--

SELECT pg_catalog.setval('public.reservation_id_seq', 24, true);


--
-- Name: space_id_seq; Type: SEQUENCE SET; Schema: public; Owner: brunocase
--

SELECT pg_catalog.setval('public.space_id_seq', 12, true);


--
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: brunocase
--

SELECT pg_catalog.setval('public.users_id_seq', 11, true);


--
-- Name: administrator administrator_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.administrator
    ADD CONSTRAINT administrator_pkey PRIMARY KEY (id);


--
-- Name: check_in_gym check_in_gym_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_in_gym
    ADD CONSTRAINT check_in_gym_pkey PRIMARY KEY (id);


--
-- Name: check_out_gym check_out_gym_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_out_gym
    ADD CONSTRAINT check_out_gym_pkey PRIMARY KEY (id);


--
-- Name: delivery delivery_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.delivery
    ADD CONSTRAINT delivery_pkey PRIMARY KEY (id);


--
-- Name: monthly_reservations monthly_reservations_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.monthly_reservations
    ADD CONSTRAINT monthly_reservations_pkey PRIMARY KEY (id);


--
-- Name: reservation reservation_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT reservation_pkey PRIMARY KEY (id);


--
-- Name: resident resident_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.resident
    ADD CONSTRAINT resident_pkey PRIMARY KEY (id);


--
-- Name: space space_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.space
    ADD CONSTRAINT space_pkey PRIMARY KEY (id);


--
-- Name: reservation uk_resident_date; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT uk_resident_date UNIQUE (resident_id, date, space_id);


--
-- Name: check_out_gym ukkapx99to1op8j9rbixo4m8c3k; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_out_gym
    ADD CONSTRAINT ukkapx99to1op8j9rbixo4m8c3k UNIQUE (check_in_gym_id);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: check_out_gym fk6l133baa8xoeujaf9h0pv7s2s; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_out_gym
    ADD CONSTRAINT fk6l133baa8xoeujaf9h0pv7s2s FOREIGN KEY (resident_id_id) REFERENCES public.resident(id);


--
-- Name: reservation fk916do7i14n1sdfktjkkwta4d5; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fk916do7i14n1sdfktjkkwta4d5 FOREIGN KEY (resident_id) REFERENCES public.resident(id);


--
-- Name: administrator fk_administrator_users; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.administrator
    ADD CONSTRAINT fk_administrator_users FOREIGN KEY (id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: monthly_reservations fk_monthly_reservations_resident; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.monthly_reservations
    ADD CONSTRAINT fk_monthly_reservations_resident FOREIGN KEY (resident_id) REFERENCES public.resident(id);


--
-- Name: monthly_reservations fk_monthly_reservations_space; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.monthly_reservations
    ADD CONSTRAINT fk_monthly_reservations_space FOREIGN KEY (reservation_id) REFERENCES public.reservation(id);


--
-- Name: resident fk_resident_users; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.resident
    ADD CONSTRAINT fk_resident_users FOREIGN KEY (id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: check_out_gym fkavbn3w63be9uuamh952xxa6qf; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_out_gym
    ADD CONSTRAINT fkavbn3w63be9uuamh952xxa6qf FOREIGN KEY (check_in_gym_id) REFERENCES public.check_in_gym(id);


--
-- Name: reservation fkdmhqfwmh1u14ulwqwj1c71kb7; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fkdmhqfwmh1u14ulwqwj1c71kb7 FOREIGN KEY (space_id) REFERENCES public.space(id);


--
-- Name: check_in_gym fkg445289d21jlj2yac6cpatmew; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_in_gym
    ADD CONSTRAINT fkg445289d21jlj2yac6cpatmew FOREIGN KEY (resident_id) REFERENCES public.resident(id);


--
-- Name: check_in_gym fkmo5lgk1fo1k0psq9m4d8hfvj4; Type: FK CONSTRAINT; Schema: public; Owner: brunocase
--

ALTER TABLE ONLY public.check_in_gym
    ADD CONSTRAINT fkmo5lgk1fo1k0psq9m4d8hfvj4 FOREIGN KEY (space_id) REFERENCES public.space(id);


--
-- PostgreSQL database dump complete
--

